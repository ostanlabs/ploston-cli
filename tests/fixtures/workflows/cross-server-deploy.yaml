# Workflow: Cross-Server Deploy
# Uses tools from multiple MCP servers
name: cross-server-deploy
version: "1.0"
description: Workflow that uses tools from multiple MCP servers

inputs:
  - name: repo_url
    type: string
    required: true
    description: Git repository URL
  - name: environment
    type: string
    required: true
    description: Deployment environment

steps:
  - id: clone
    tool: git_clone
    params:
      url: "{{ inputs.repo_url }}"
      branch: main

  - id: build
    tool: docker_build
    params:
      context: "{{ steps.clone.output.path }}"
      tag: "app:{{ inputs.environment }}"
    depends_on:
      - clone

  - id: deploy
    tool: k8s_deploy
    params:
      image: "app:{{ inputs.environment }}"
      namespace: "{{ inputs.environment }}"
    depends_on:
      - build

outputs:
  - name: deployment_status
    value: "{{ steps.deploy.output }}"
